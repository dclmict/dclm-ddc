project:    dclm-ddc
repo:       https://github.com/dclmict/dclm-dtc
url:        https://developers.dclm.org


-- app url
dev:        http://127.0.0.1:1000
prod:	      https://developers.dclm.org


-- setup repo
cd ~/dev/web/dclm/dclm-dtc
gh repo create dclmict/dclm-dtc --public --source=. --remote=origin
git push --set-upstream origin main
git push


-- dockerise app
make image
make image-push


-- run project on dev (docker)
- fresh install
mkdir -p ~/dev/code/dclm/dclm-dtc
cd ~/dev/code/dclm/dclm-dtc
make up
+
- run app
make up
make sh
make down
make log


-- run project on prod (docker)
- fresh install
mkdir -p /var/docker/dclm-dtc
cd /var/docker/dclm-dtc
git clone https://github.com/dclmict/dclm-dtc.git .
make up
+
- run app
make up
make sh
make down
make log
+
- nginx config
sudo vim /etc/nginx/conf.d/dclm.conf
# developers.dclm.org
server {
  listen 443 ssl http2;
  listen [::]:443 ssl http2;
  server_name    developers.dclm.org;
  error_log      /var/log/nginx/dclm-ddc.log debug;

  location / {
    # proxy_pass http://127.0.0.1:1017;
    proxy_pass https://127.0.0.1:1017;
    include /etc/nginx/proxy_params;
    add_header 'Content-Security-Policy' 'upgrade-insecure-requests';
  }

  include global/noway.conf;
  include global/security.conf;
  ssl_certificate /etc/letsencrypt/live/dclm.org/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/dclm.org/privkey.pem;
  include /etc/nginx/global/ssl.conf;    
}